{"ast":null,"code":"import _classCallCheck from \"/Users/Famille/Code-lab/vidly/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Famille/Code-lab/vidly/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Famille/Code-lab/vidly/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Famille/Code-lab/vidly/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Famille/Code-lab/vidly/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Famille/Code-lab/vidly/src/components/movieForm.jsx\";\nimport React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"./common/form\";\nimport { getMovie, getMovies, saveMovie } from \"../services/fakeMovieService\";\nimport { getGenres } from \"../services/fakeGenreService\";\n\nvar MovieForm =\n/*#__PURE__*/\nfunction (_Form) {\n  _inherits(MovieForm, _Form);\n\n  function MovieForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MovieForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MovieForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {\n        _id: \"\",\n        title: \"\",\n        genreId: \"\",\n        numberInStock: \"\",\n        dailyRentalRate: \"\"\n      },\n      genres: [],\n      errors: {}\n    };\n    _this.schema = {\n      _id: Joi.string(),\n      title: Joi.string().required().label(\"Title\"),\n      genreId: Joi.string().required().label(\"Genre\"),\n      numberInStock: Joi.number().required().integer().min(0).max(100).label(\"Number in Stock\"),\n      dailyRentalRate: Joi.number().required().min(0).max(10).label(\"Daily Rental Rate\")\n    };\n\n    _this.mapToViewModel = function (movie) {\n      return {\n        _id: movie._id,\n        title: movie.title,\n        genreId: movie.genre._id,\n        numberInStock: movie.numberInStock,\n        dailyRentalRate: movie.dailyRentalRate\n      };\n    };\n\n    _this.doSubmit = function () {\n      saveMovie(_this.state.data);\n\n      _this.props.history.push(\"/movies\");\n    };\n\n    return _this;\n  }\n\n  _createClass(MovieForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var genres = getGenres();\n      this.setState({\n        genres: genres\n      });\n      var movieId = this.props.match.params.id;\n      if (movieId === \"new\") return;\n      var movie = getMovie(movieId);\n      if (!movie) return this.props.history.replace(\"/not-found\");\n      this.setState({\n        data: this.mapToViewModel(movie)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          data = _this$state.data,\n          genres = _this$state.genres,\n          errors = _this$state.errors;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Movie Form\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, this.renderInput(\"title\", \"Title\"), this.renderSelect(\"genreId\", \"Genres\", this.state.genres), this.renderInput(\"numberInStock\", \"Number in Stock\", \"number\"), this.renderInput(\"dailyRentalRate\", \"Rate\"), this.renderButton(\"Save\")));\n    }\n  }]);\n\n  return MovieForm;\n}(Form);\n\nexport default MovieForm;","map":{"version":3,"sources":["/Users/Famille/Code-lab/vidly/src/components/movieForm.jsx"],"names":["React","Joi","Form","getMovie","getMovies","saveMovie","getGenres","MovieForm","state","data","_id","title","genreId","numberInStock","dailyRentalRate","genres","errors","schema","string","required","label","number","integer","min","max","mapToViewModel","movie","genre","doSubmit","props","history","push","setState","movieId","match","params","id","replace","handleSubmit","renderInput","renderSelect","renderButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"./common/form\";\nimport { getMovie, getMovies, saveMovie } from \"../services/fakeMovieService\";\nimport { getGenres } from \"../services/fakeGenreService\";\n\nclass MovieForm extends Form {\n  state = {\n    data: {\n      _id: \"\",\n      title: \"\",\n      genreId: \"\",\n      numberInStock: \"\",\n      dailyRentalRate: \"\"\n    },\n    genres: [],\n    errors: {}\n  };\n\n  schema = {\n    _id: Joi.string(),\n    title: Joi.string()\n      .required()\n      .label(\"Title\"),\n    genreId: Joi.string()\n      .required()\n      .label(\"Genre\"),\n    numberInStock: Joi.number()\n      .required()\n      .integer()\n      .min(0)\n      .max(100)\n      .label(\"Number in Stock\"),\n    dailyRentalRate: Joi.number()\n      .required()\n      .min(0)\n      .max(10)\n      .label(\"Daily Rental Rate\")\n  };\n\n  componentDidMount() {\n    const genres = getGenres();\n    this.setState({ genres });\n    const movieId = this.props.match.params.id;\n    if (movieId === \"new\") return;\n\n    const movie = getMovie(movieId);\n    if (!movie) return this.props.history.replace(\"/not-found\");\n\n    this.setState({ data: this.mapToViewModel(movie) });\n  }\n\n  mapToViewModel = movie => {\n    return {\n      _id: movie._id,\n      title: movie.title,\n      genreId: movie.genre._id,\n      numberInStock: movie.numberInStock,\n      dailyRentalRate: movie.dailyRentalRate\n    };\n  };\n\n  doSubmit = () => {\n    saveMovie(this.state.data);\n\n    this.props.history.push(\"/movies\");\n  };\n\n  render() {\n    const { data, genres, errors } = this.state;\n    return (\n      <div>\n        <h1>Movie Form</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"title\", \"Title\")}\n          {this.renderSelect(\"genreId\", \"Genres\", this.state.genres)}\n          {this.renderInput(\"numberInStock\", \"Number in Stock\", \"number\")}\n          {this.renderInput(\"dailyRentalRate\", \"Rate\")}\n          {this.renderButton(\"Save\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default MovieForm;\n"]},"metadata":{},"sourceType":"module"}